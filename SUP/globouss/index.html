<!DOCTYPE HTML PUBLIC "-//IETF//DTD HTML//EN">
<html>
  <head>
    <title>Program for global propagation of dispersive tsunamis</title>
  </head>

  <body bgcolor="white">
    <h1>Wave propagation program</h1>

    This page is a documentation of a f77 code for solving the Boussinesq 
    equations in geographical coordinates
<h3>The formulation</h3>
     The program is based on the standard Boussinesq equations with a Coriolis
     term and an additional dispersion term to obtain the same enhanced
     dispersion properties in constant depth as the Nwogu formulation.
     The model and algorithm is described in a separate <a href="rapport.pdf" >report </a> and an <a href="sliderap.pdf">addition </a> for sink/source distributions. 
<h3>Main features</h3>
Features included
<ul>
<li> Nonlinearity and dispersion
<li> Optional correction term for dispersion
<li> Geographical or Cartesian coordinates
<li> Land is unmasked and represented as staircase boundaries. In the
     nonlinear case a threshold value for allowable depths must be defined
<li> Coriolis effects
<li> Velocities and surface read as initial conditions and interpolated on
     the computational grid
<li> General sink source distributions representing slides or slow earthquakes, see  <a href="sliderap.pdf">separate report</a>
<li> A moving surface pressure.
<li>  Specification of influxes at  boundaries (still test feature). 
<li> Output of fields and time series.
<li> Optional computation of maximum excursion of surface elevation over the
     whole field.
<li> Higher order discretization of leading order terms
<li> Simple sponge layers.
</ul>
Possible future features 
<ul>
<li> A simple run-up model
<li> Bottom friction
<li> An alternative representation of nonlinear terms 
<li> A simple breaking facility
<li> Parallel and DD implementations
</ul>
<h3>The input/output</h3>
    <ul>
    <li> Parameters are read in a dialogue from standard input. 
         Lines starting with !
         are recognized as parameters, there are some checks on the input
         and default values are generally offered. The program is still 
         under development and the dialogue may be reorganized and extended.
         The interface script 
        <a href="../scripdoc/gglparse.txt">gglparse.pe </a> 
         provides backward compatibility and
         extra functionality and should be preferred to direct application
         of input files. Still an example of <a href="indat"> input file </a>
         is given, but this will become obsolete. (See also 
         <a href="../scripdoc/ggrestart.html">ggrestart.pe </a> and 
         <a href="../scripdoc/apbonew.txt">apbonew.sh </a>)

    <li> A depth matrix may be provided in <a href="../gpxyconv/index.html">gphov format </a> or a flat 
         bottom region specified.
         The coordinates may be geographical (degrees) or Cartesian (with and
         without dimension). The grid may be modified by clipping and/or
         interpolation. 
    <li> With geographical coordinates a the Coriolis effect may be switched off
         or retained as a field. With Cartesian coordinates the parameter is
         read and represented as a constant.
    <li> An initial elevation and a velocity field (optional)
	 are read from 3 files in the 'gphov' format. Routines for writing
	 and reading files in this format are given in
	 /hom/geirkp/lib/les.f, compiled code in
	 /hom/geirkp/lib/i386/bibl*.a, where * is '' or IN8 
         (64 bits default compilation by the Intel compiler).
    <li> Three separate xy files with positions for time series are read for
         surface elevations and the two velocity components respectively.
         The output is given in three files that must be parsed by 
         <a href="../scripdoc/splitser.txt"> splitser.pe</a>
    <li> Source/sink distributions from files can be read. The sources are
         applied to the equation of continuity and (optional) to the 
         depth matrix. 
         See  <a href="../scripdoc/gglparse.txt">gglparse.pe. </a>
      A test source, used in <a href="sliderap.pdf">the additional report</a>, is generated by the the script <a href="../scripdoc/Dsor.txt">Dsor.pe. </a>
     <li> The model may be driven from boundaries. These boundaries may be different from the global boundaries of the model. This feature may not be fully tested yet.
    <li> Output
      <ol>
       <li> param.dat -- file with parameters in particular format. <br>
            <a href="internpar.txt">Selection of parameters. </a>
       <li> cu, cv, rcy, fu, fv -- xy files with map factors and Coriolis
            parameters 
       <li> inu0, inv0 -- Files with grid segments to be computed for
            u and v, respectively.
       <li> uN, vN and yN -- fields (gphov format) for u, v and eta files 
            (N is the number of time for output). These may be either ascii or b            inary. In either case the surfaces may be separately rescaled to 
             be expressed in meters.
        <li> ymaxN, yminN - accumulated max and min file. Must be specified
             with -prfield option.
        <li> etaxy, uxy, vxy, etaser, user, vser - locations and values for 
             time series. *ser must be processed by  <a href="../scripdoc/splitser.txt"> splitser.pe</a>. etaxy contains a third column which is the initial equilibrium depth at the position.    
        <li> [yuv]prop.$ext; with ext=dat or bin for ascii and binary format 
              respectively. Propagation matrices in gphov format of a 
              specified subgrid in a specified density. These files may be
              transformed to netCDF/COMMIT format by <a href="../scripdoc/Com.txt"> Com.pe </a>, which employs <a href="../netCDF/gptocom.html"> gptocom. </a> 
      </ol>
   </ul>
   <p>

  <h3> An example </h3>
   Files necessary to compute diffraction from a vertical cylinder, as described in the report, is given in directory <a href="lagex"> lagex </a>.
The README file in the sub-directory named <em> source </em>provides the necessary instructions.
  <h3> The code</h3>
  Some documentation of key routines is found in the source codes. 
  Sketches of <a href="ggsketch.txt"> the program </a> and 
  <a href="grsketch.txt"> key routine  </a> for time integration is
  provided.<br> 
  Below is given the particulars of the newest version of the Globouss model.
   <table  width="500" CELLPADDING="5" BORDER="2">
<tr><td>
   directory: <td>/home/geirkp/bouss/trappe</tr>
   <tr><td>
   main program<td> ggNlob.f </tr>
   <tr><td>
   additional files:<td>modser.f gserv.f tserv.f svamp.f grNfituv.f randfeed.f90 corrflux.f propfw.f sinksor.f kildeflux.inc  tser.inc </tr>
   <tr><td>
   additional libraries:<td> biblGF8.a, diaGF8.a in /home/geirkp/lib/i386 </tr>
   <tr><td>
   makefile:<td> i386/mggloN </tr>
   <tr><td>
   executable: <td> i386/ggloN </tr>
   <tr><td>
   scripts: <td> <a href="../scripdoc/gglparse.txt"> bin/gglparse.pe</a>   <a href="../scripdoc/ggrestart.txt"> bin/ggrestart.pe </a>   <a href="../scripdoc/splitser.txt"> bin/splitser.pe</a></tr>
</table>
    <p>
  <h3> An example (Not yet provided)</h3>
    An example is given in this directory in <a href="example.sh"> example.sh </a> that must be run
    on an Linux computer with the files ... locally available.
    The program interprets as a comment every line on
    stdin starting with a '!'.   
   </a>
   <p>
   <hr>
    <address><a href="mailto:geirkp@math.uio.no">Geir Pedersen</a></address>
<!-- hhmts start -->
<!-- hhmts end -->
  </body>
</html>
