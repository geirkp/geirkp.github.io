
      gkontur.pe

 Script for generation of contour plots by the Gsharp system. All information
 is given on a single command line. Syntax

 gkontur.pe (#DEF:file) (-ostem stem) (-opt arg1 ...) (-opt arg1 ...) filename

 Before the script is invoked certain environment variables must be defined etc. This is obtained by

. /hom/geirkp/bin/Startuni.sh

 
 Generally (see exceptions below), the script generates a set of files

       type                   name                 comment
 
     shell script          "stem".sh       File-handling, runs Gsharp    
     gsl script            "stem".gsl         
     gphov datafile        "stem".dat      Data for contouring (below)
     gphov datafile        "stem"M.dat     Data for unmasking (see -umask)
     One-line ascii        "stem".grens    Contour limits
     Postscript            "stem".ps       The plot
     One-column ascii      "stem"x1        x-coordinate, first additional curve
     One-column ascii      "stem"y1        y-coordinate, first additional curve
     One-column ascii      "stem"x2        x-coordinate, sec. additional curve
     .....
     .....

 The filename is either the special string 'DEF' (not to be confused with
 the #DEF option), an ascii file in
 gphov format, or a binary gphov file with extension '.bin'. In case 
 filename refers to a gphov file the file  "stem".dat is extracted
 unless we are to plot the full first dataset of an ascii file.
 When filename equals 'DEF' the files "stem".dat and "stem"M.dat
 are assumed to already exist.

 The leading optional #DEF:file is special. If this is set file
 is interpreted as a text file containing a list of parameter values
 in a format as specified by getnew.pe. This is read and loaded as
 new defaults, that may be overruled by the preceding command line
 arguments. An example of content:   
-umask = 1 
-minsk = 1 1 40 40 
-zrange = 1.5 
-graph = 3DGrid 
-pers = 40 220 
-umkrit =  < -50
-ostem = GG10 
-shade = r

 The options consist of an identifier, followed by one to four
 arguments. A single argument can be a list where the items are
 separated either by commas or blanks. In the latter case the argument
 must be given within quotes.

 options:
       -minsk arg1...4     Yields cropping of grid with lower left
              corner (arg1,arg2) and upper right (arg3,arg4)
              Default: no reduction of region.
       -sil arg1 arg2  Sets the density of data.
              Default: arg1=arg2 =1 ( no data are skipped)
        -n  arg Selects the number of the dataset. Important only in
                relation to the -umask argument when filename equals 'DEF'
                Default: n=1
       -ekv arg  Sets the contour interval and increments. This may be done
                 in three manners:
                 1:  arg=les:file   
                    A list of contour values is read from the single line file 
                 2:  arg is a list of number that are interpreted as contour
                    values
                 3: arg=min:max,step where min max and step are numbers. The 
                  contour values  the becomes min, min + step etc until max
                  is reached. If the ',step' is omitted the script employs
                  step=(max-min)/8.0. If min > max the job is killed.
                 In any of these cases the file "stem".grens is generated.
                 Default: No "stem".grens is generated and the choice of
                 contour intervals is left to Gsharp.
   
       -ostem arg  Sets the common prefix of the file family generated by
                  the script. 
                  Default: Ggk
       -xl  arg   Sets the x label. Default: x
       -yl  arg   Sets the y label. Default: y
       -lz  arg   Sets the label size in percents of the domain.
                  Default: 5
       -zs  arg1 arg2 Sets arg1, arg2 as min. and max. for z-data
                  Default: no setting, Gsharp uses min and max from data.
       -pers arg  Sets the perspective. If arg contains two numbers
                  they are interpreted as oblique angle and angle in
                  the xy-plane respectively.  A blank argument 
                  corresponds to the values 40 and 0.
                  Default: OFF   (no perspective)
       -graph  arg Defines type of graph, options:
                     2D    or   2DContour      
                     3D    or   3DContour
                     grid
                     3DGrid                   
                  Default: 2D if -pers is not set, 3D otherwise
       -zrange arg  Sets range in z-direction.
                  Default: 2 
       -cwidth arg Sets linewidth for contour lines. A value <=0
                  removes contour lines.
                  Default: Gsharp's default value. 
       -csize  arg  Sets the size on the contour labels in percents.
                  If arg<=0 contour labels are omitted.
       -usize  arg  Sets the size on the axis-numbers. 
                  If arg<=0 axis numbers and tickmarks  are omitted.
                  Default: 4
       -exdeg  arg  Defines the fraction of each dimension of the page
                that is used for the plot. If arg becomes to close
                to 1 legends at axes etc may be lost.
                Default: 0.85
       -scale  arg1 arg2 Sets the scale on the x and y- axes respectively.
                  (plotted x = arg1 * data x   etc.)
               Default: arg1=arg2=1
       -off arg1 arg2 Shifts origin in x and y direction.
               Default: arg1=arg2=0
       -vscale  arg  Sets the scale on z (the scalar field).
                   (plotted z = arg1 * data z)
              Default: arg=1
       -ystretch arg  Sets the aspect ration for the plot. The y direction
              is strechted a factor arg relative to true aspect ratio.
              Default: arg=1 (true aspect ratio)
       -ainc  arg1 arg2  Govern the density of numbers on the axes. 
              Each argument can be given in one of two ways:
              1: ':n' where n is interpreted as the number of intervals 
              2: 'step' where step becomes the interval length
              Default: arg1=arg2=':5'
       -add  arg Introduces additional curves from files in genkurv
             format. arg is given as the file arguments to genkurv
             except for the explanation parts. The files are first 
             processed by gsplit.pe, then split in the script
             "stem".sh
             Default: no additional curves
       -Lw  arg  Sets a list of linewidths, or symbols, for additional curves.
             If the list is too short compared to the number of curves
             it is repeated. Linewidths are simply numbers, while the the
             symbol codes are
               star or *, circle or o, x, cross, box
             Default: '0.3 0.2 0.1'
       -Lc  arg  Sets a list of colors for additional curves.
             If the list is too short compared to the number of curves
             it is repeated.
             Default: 1       (black)
       -Ls  arg  Sets a list of curve-types for additional curves.
             If the list is too short compared to the number of curves
             it is repeated.
             Default: 0       (solid)
       -arrowf arg  Reads instructions for arrows from file arg. One line
              in the file defines one arrow according to
                xa ya xb yb width headlength headwidth doubl style
              where
                xa ya xb yb - from and to positons in %
                width - widthfactor 
                headlength, headwidth - factors for headlength and width
                doubl - value 'double' yields double head, single single head
                style - head style  (solid, barbed, wedge, hollow)
              default: no arrows 
       -umask  arg  Removes datapoints from plotting by means of the
              dataset arg. Used to mark land.
              Default: off
       -umkrit  arg  The criterion for unmasking. A data value is set undef
                if the h value (from the -umask dataset) fulfills the
                criterion arg.
                Default:  '<0' 
       -umcol  arg  Defines the color of land, either as black, green or 
               a number.
               Default: green
       -legend  arg  Activate the shade-legend with arg as title. If arg
               is blank the title is omitted. The 'OFF' and 'false' yield
               no legend.
               Default: arg='OFF'
       -tit arg : sets arg as header above the plot
               Default: no header
       -titpos arg: vertical position in percent of height
               default: arg=101
       -legpos  arg Defines the relative position of the lower left
                corner of shade-legend in percents. arg is then a list of
                two or three numbers. In the latter case the last
                gives the size of each entry in the legend; Otherwise 
                the default is 6.5.
                Default: arg='100 0'
       -shade  arg  Selects scale of shades. The following are available:

                 name(short)   alternative name(as in Gsharp)
 
                  bwr            blueWhiteRed 
                   d               default 
                   g                grey 
                   t  or T       topographic 
	           cyr           cyanYellowRed 
                   r                rainbow 
                  OFF               false
               where either names can be applied as arg.
               Default: bwr
       -dig  arg  Sets a miscellaneous parameters that govern numbers.
                  arg is a list of entries of the form 'id:n' where
                  id is an identifier and n a number.

                   id                    meaning
                    l            number of decimals in legend
                    la           density of numbers in legend
                    lh           height of legend title
                    lt           height of plot title
                    c            number of decimals on contours
                    x            number of decimals on x axis
                    y            number of decimals on y axis
                    bC           background legend color (def:7 yellow)
          
       -page  arg1 arg2 Defines size of page.
               Default: 172.812 137.812    
       -skyv arg1 arg2  The ps-code is translated arg1 and arg2 inches in the
              x and y direction respectively. Performed with script skyvgsps.pe
              applied to the ps output from Gsharp.
              Default: no translation.
       -mesh  arg  Sets a mesh. arg contains from zero to three numbers 
                  (r1,r2,r3) separated by blanks or commas. 
                 The value of r1 is the linewidth of major meshlines (mm) 
                 (default 0.5).
                 The value of r2 is the linewidth of minor meshlines (mm)
                 (default 0.3*r1, zero value make minor lines disappear)
                 r3 is the step in major meshslines (default 4)
             Default: no mesh.



